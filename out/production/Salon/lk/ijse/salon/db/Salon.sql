DROP DATABASE salon;

CREATE DATABASE salon;

SHOW DATABASES;

USE salon;

SHOW TABLES;

DROP TABLE customer;

CREATE TABLE IF NOT EXISTS customer(
    CID VARCHAR(6) NOT NULL,
    name VARCHAR(30) NOT NULL,
    address VARCHAR(30) NOT NULL,
    contact VARCHAR(10) NOT NULL,
    CONSTRAINT PRIMARY KEY (CID)
    );

INSERT INTO customer VALUES ('C001','Thinusha','Galle','0774002633');
INSERT INTO customer VALUES ('C002','Supun','Galle','0774002633');
INSERT INTO customer VALUES ('C003','Dilhara','Galle','0774002633');
INSERT INTO customer VALUES ('C004','Chamodya','Galle','0779858417');
INSERT INTO customer VALUES ('C005','Kavindi','Galle','0774002633');

DESC customer;
SELECT * FROM customer;

DROP TABLE appointment;

CREATE TABLE IF NOT EXISTS appointment(
    AID VARCHAR(10) NOT NULL,
    aDate DATE NOT NULL,
    aTime TIME NOT NULL,
    CID VARCHAR(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (AID),
    CONSTRAINT FOREIGN KEY(CID) REFERENCES customer(CID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO appointment VALUES ('A001','2022-03-24','10:00','C001');
INSERT INTO appointment VALUES ('A002','2022-03-25','11:00','C002');
INSERT INTO appointment VALUES ('A003','2022-03-26','12:00','C003');
INSERT INTO appointment VALUES ('A004','2022-03-27','13:00','C004');
INSERT INTO appointment VALUES ('A005','2022-03-28','14:00','C005');

DESC appointment;
SELECT * FROM appointment;

DROP TABLE item;

CREATE TABLE IF NOT EXISTS item(
    IID VARCHAR(10) NOT NULL,
    description VARCHAR (100) NOT NULL,
    unitPrice DECIMAL(10) NOT NULL,
    qtyOnHand INT(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (IID)
    );

INSERT INTO item VALUES ('I001','Shampoo','600','20');
INSERT INTO item VALUES ('I002','Hair oils & serums','500','20');
INSERT INTO item VALUES ('I003','Hair spray','900','10');
INSERT INTO item VALUES ('I004','Hair dyes and lighteners','1500','30');
INSERT INTO item VALUES ('I005','Brushes','1000','20');

DESC item;
SELECT * FROM item;

DROP TABLE orders;

CREATE TABLE IF NOT EXISTS orders(
    OID VARCHAR(10) NOT NULL,
    oDate DATE NOT NULL,
    CID VARCHAR(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (OID),
    CONSTRAINT FOREIGN KEY(CID) REFERENCES customer(CID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO orders VALUES ('O001','2022-03-24','C001');
INSERT INTO orders VALUES ('O002','2022-03-25','C002');
INSERT INTO orders VALUES ('O003','2022-03-26','C003');
INSERT INTO orders VALUES ('O004','2022-03-27','C004');
INSERT INTO orders VALUES ('O005','2022-03-28','C005');

DESC orders;
SELECT * FROM orders;

DROP TABLE orderDetail;

CREATE TABLE IF NOT EXISTS orderDetail(
    OID VARCHAR(6) NOT NULL,
    IID VARCHAR(10) NOT NULL,
    unitPrice DECIMAL(10) NOT NULL,
    qty INT(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (OID,IID),
    CONSTRAINT FOREIGN KEY(OID) REFERENCES orders(OID)
    ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT FOREIGN KEY(IID) REFERENCES item(IID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO orderDetail VALUES ('O001','I001','600','1');
INSERT INTO orderDetail VALUES ('O002','I002','500','2');
INSERT INTO orderDetail VALUES ('O003','I003','900','2');
INSERT INTO orderDetail VALUES ('O004','I004','1500','3');
INSERT INTO orderDetail VALUES ('O005','I005','1000','3');

DESC orderDetail;
SELECT * FROM orderDetail;

DROP TABLE supplier;

CREATE TABLE IF NOT EXISTS supplier(
    SID VARCHAR(6) NOT NULL,
    name VARCHAR(30) NOT NULL,
    address VARCHAR(30) NOT NULL,
    contact VARCHAR(10) NOT NULL,
    CONSTRAINT PRIMARY KEY (SID)
    );

INSERT INTO supplier VALUES ('S001','Lindo','Colombo','0776547987');
INSERT INTO supplier VALUES ('S002','Sumudu','Galle','0715487157');
INSERT INTO supplier VALUES ('S003','Veera','Galle','0705487325');
INSERT INTO supplier VALUES ('S004','Liya','Galle','0755487784');
INSERT INTO supplier VALUES ('S005','Suleka','Galle','0915484627');

DESC supplier;
SELECT * FROM supplier;

DROP TABLE supOrder;

CREATE TABLE IF NOT EXISTS supOrder(
    SOID VARCHAR(10) NOT NULL,
    soDate DATE NOT NULL,
    SID VARCHAR(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (SOID),
    CONSTRAINT FOREIGN KEY(SID) REFERENCES supplier(SID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO supOrder VALUES ('SO01','2022-03-24','S001');
INSERT INTO supOrder VALUES ('SO02','2022-03-25','S002');
INSERT INTO supOrder VALUES ('SO03','2022-03-26','S003');
INSERT INTO supOrder VALUES ('SO04','2022-03-27','S004');
INSERT INTO supOrder VALUES ('SO05','2022-03-28','S005');

DESC supOrder;
SELECT * FROM supOrder;

DROP TABLE supOrderDetail;

CREATE TABLE IF NOT EXISTS supOrderDetail(
    SOID VARCHAR(6) NOT NULL,
    IID VARCHAR(10) NOT NULL,
    unitPrice DECIMAL(10) NOT NULL,
    qty INT(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (SOID,IID),
    CONSTRAINT FOREIGN KEY(SOID) REFERENCES supOrder(SOID)
    ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT FOREIGN KEY(IID) REFERENCES item(IID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO supOrderDetail VALUES ('SO01','I001','600','10');
INSERT INTO supOrderDetail VALUES ('SO02','I002','500','5');
INSERT INTO supOrderDetail VALUES ('SO03','I003','900','5');
INSERT INTO supOrderDetail VALUES ('SO04','I004','1500','10');
INSERT INTO supOrderDetail VALUES ('SO05','I005','1000','5');

DESC supOrderDetail;
SELECT * FROM supOrderDetail;

DROP TABLE employee;

CREATE TABLE IF NOT EXISTS employee(
    EID VARCHAR(6) NOT NULL,
    name VARCHAR(30) NOT NULL,
    address VARCHAR(30) NOT NULL,
    contact VARCHAR(10) NOT NULL,
    CONSTRAINT PRIMARY KEY (EID)
    );

INSERT INTO employee VALUES ('E001','Sudarma','Galle','0776547987');
INSERT INTO employee VALUES ('E002','Maleesha','Galle','0776547987');
INSERT INTO employee VALUES ('E003','Gayani','Galle','0776547987');

DESC employee;
SELECT * FROM employee;

/*
DROP TABLE service;

CREATE TABLE IF NOT EXISTS service(
	serID VARCHAR(6) NOT NULL,
	name VARCHAR(30) NOT NULL,
	types VARCHAR(30) NOT NULL,
	price DOUBLE(10,2) NOT NULL,
	AID VARCHAR(6) NOT NULL,
	EID VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (serID),
	CONSTRAINT FOREIGN KEY(AID) REFERENCES appointment(AID)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY(EID) REFERENCES employee(EID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO service VALUES ('SE01','Hair dressing','Hair','500','A001','E001');
INSERT INTO service VALUES ('SE02','Makeups','Skin','1000','A002','E002');
INSERT INTO service VALUES ('SE03','Hair cutting','Hair','400','A003','E003');
INSERT INTO service VALUES ('SE04','Nail polish','Nail','550','A004','E001');
INSERT INTO service VALUES ('SE05','Facials','Skin','1200','A005','E002');

DESC service;
SELECT * FROM service;
*/

DROP TABLE service;

CREATE TABLE IF NOT EXISTS service(
    serID VARCHAR(6) NOT NULL,
    name VARCHAR(30) NOT NULL,
    types VARCHAR(30) NOT NULL,
    price DOUBLE(10,2) NOT NULL,
    CONSTRAINT PRIMARY KEY (serID)
    );

INSERT INTO service VALUES ('SE01','Hair dressing','Hair','500');
INSERT INTO service VALUES ('SE02','Makeups','Skin','1000');
INSERT INTO service VALUES ('SE03','Hair cutting','Hair','400');
INSERT INTO service VALUES ('SE04','Nail polish','Nail','550');
INSERT INTO service VALUES ('SE05','Facials','Skin','1200');

DESC service;
SELECT * FROM service;

DROP TABLE serviceOrder;

CREATE TABLE IF NOT EXISTS serviceOrder(
    serGID VARCHAR(10) NOT NULL,
    OID VARCHAR(10) NOT NULL,
    serID VARCHAR(10) NOT NULL,
    Price DECIMAL(15) NOT NULL,
    CONSTRAINT PRIMARY KEY (serGID,OID,SerID),
    CONSTRAINT FOREIGN KEY(OID) REFERENCES orders(OID)
        ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT FOREIGN KEY(serID) REFERENCES service(serID)
        ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO serviceOrder VALUES ('SEG001','O001','SE01','500');
INSERT INTO serviceOrder VALUES ('SEG002','O002','SE02','1000');
INSERT INTO serviceOrder VALUES ('SEG003','O003','SE03','400');
INSERT INTO serviceOrder VALUES ('SEG004','O004','SE04','550');
INSERT INTO serviceOrder VALUES ('SEG005','O005','SE05','1200');

DESC serviceOrder;
SELECT * FROM serviceOrder;

DROP TABLE salary;

CREATE TABLE IF NOT EXISTS salary(
    EID VARCHAR(6) NOT NULL,
    cost DECIMAL(10) NOT NULL,
    CONSTRAINT PRIMARY KEY (EID),
    CONSTRAINT FOREIGN KEY(EID) REFERENCES employee(EID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO salary VALUES ('E002','30000');
INSERT INTO salary VALUES ('E003','30000');

DESC salary;
SELECT * FROM salary;

DROP TABLE payment;

CREATE TABLE IF NOT EXISTS payment(
    PID VARCHAR(6) NOT NULL,
    pDate DATE NOT NULL,
    description VARCHAR (30) NOT NULL,
    cost DECIMAL(10) NOT NULL,
    CONSTRAINT PRIMARY KEY (PID)
    );

INSERT INTO payment VALUES ('P001','2022-03-26','Current Bill','2000');
INSERT INTO payment VALUES ('P002','2022-03-27','Water Bill','1000');
INSERT INTO payment VALUES ('P003','2022-03-28','Supplier Lindo','6000');
INSERT INTO payment VALUES ('P004','2022-03-29','Supplier Suleka','5000');
INSERT INTO payment VALUES ('P005','2022-03-30','Supplier Liya','15000');

DESC payment;
SELECT * FROM payment;

DROP TABLE users;

CREATE TABLE IF NOT EXISTS users(
    userName VARCHAR(10) NOT NULL,
    password VARCHAR(10) NOT NULL,
    role VARCHAR(20) NOT NULL,
    EID VARCHAR(6) NOT NULL,
    CONSTRAINT PRIMARY KEY (EID),
    CONSTRAINT FOREIGN KEY(EID) REFERENCES employee(EID)
    ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO users VALUES ('admin','1234','Admin','E001');
INSERT INTO users VALUES ('resc','1234','Reception','E002');
INSERT INTO users VALUES ('resc','1234','Reception','E003');

DESC users;
SELECT * FROM users;